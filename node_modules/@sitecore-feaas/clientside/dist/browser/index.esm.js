var te=Object.defineProperty;var ee=(t,e)=>{for(var r in e)te(t,r,{get:e[r],enumerable:!0})};function R(t,e=r=>{}){var r;let i=()=>{var n,s;let o=new Promise((l,u)=>{n=d=>{t==null||t(d),l(d)},s=u});var a=Object.assign(o,{resolve:n,reject:s,restart:i,first:r});return r=a,a.catch(e),a};return i()}var re=typeof HTMLElement=="undefined"?typeof windowJSDOM!="undefined"?windowJSDOM.HTMLElement:class{}:HTMLElement,b=class extends re{getProps(e){return{}}constructor(){super(),this.defaultProps={},this.connected=!1,this.refs={},this.descendants=[],this.whenLoaded=R(e=>{this.payload=e}),this.whenRendered=R(()=>this.initialized=!0,()=>cancelAnimationFrame(this.nextRender)),this.addEventListener("feaasMount",this),this.addEventListener("feaasUnmount",this)}getRoot(){return this}attributeChangedCallback(e,r,i){this.set()}connectedCallback(){this.mount()}disconnectedCallback(){this.unmount()}mount(){try{let e=this.getParent();if(e&&!e.connected||this.connected)return;this.connected=!0,this.log("FEAAS: Mount",this.tagName,this),this.dispatchEvent(new Event("feaasMount",{bubbles:!0,composed:!0})),this.getElements().map(r=>{var i;return(i=r.mount)===null||i===void 0?void 0:i.call(r)}),this.set()}catch(e){this.onError(e)}}log(...e){console.log(...e)}unmount(){this.connected&&(this.log("FEAAS: Unmount",this),this.dispatchEvent(new Event("feaasUnmount",{bubbles:!0,composed:!0})),this.connected=!1)}getParent(e=!0){for(var r=this;r=r.parentElement||(r.parentNode instanceof ShadowRoot?r.parentNode.host:null);)if(!e||r.tagName.startsWith("FEAAS-"))return r}getElements(e=this.getRoot(),r=!0){return Array.from(e.querySelectorAll("*")).map(i=>[!r||i.tagName.startsWith("FEAAS-")?i:null,i.shadowRoot?this.getElements(i.shadowRoot,r):null]).flat().filter(Boolean)}handleEvent(e){let r=e.composedPath()[0];switch(e.type){case"feaasMount":r!=this&&this.nestedCallback(r);break;case"feaasUnmount":r!=this&&this.unnestedCallback(r);break}}unnestedCallback(e){let r=this.descendants.indexOf(e);r!=-1&&(this.log("FEAAS: Unnest",this,e),this.descendants.splice(r,-1),this.refs[e.getComponentName()]=null,e.refs.parent==this&&(e.refs.parent=null),e.refs.top==this&&(e.refs.top=e.refs.parent))}nestedCallback(e){var r,i;if(this.descendants.indexOf(e)==-1&&(this.descendants.push(e),this.log("FEAAS: Nest",this,e),this.refs[e.getComponentName()]=e,e.refs.top=this,(r=e.refs).parent||(r.parent=this),e.render))for(var s=e.refs.parent;s;s=s.refs.parent)s.render&&((i=e.refs).parentReact||(i.parentReact=s),e.refs.topReact=s)}getComponentName(){return this.tagName.replace("FEAAS-","").toLowerCase()}isReadyToLoad(){return this.payload===void 0&&this.getAttribute("hidden")==null}onError(e,r="uncaught",i=!1){let n=new CustomEvent("feaasError",{bubbles:!0,composed:!0,detail:e});if(this.dispatchEvent(n),this.whenLoaded.reject(e),!n.defaultPrevented&&!i){this.whenRendered.reject(e);try{this.unmount()}catch(s){}return!0}return!1}shouldUpdateOnLoad(){return!0}async advance(){try{if(this.payload===void 0){if(!this.isReadyToLoad())return;this.payload=null,this.dispatchEvent(new Event("feaasLoad",{bubbles:!0,composed:!0}));let e=await this.load().catch(r=>{throw this.payload=void 0,r});if(this.whenLoaded.resolve(e),this.onLoad)return}else if(this.payload==null)return;this.flush(),this.whenRendered.resolve(this)}catch(e){this.onError(e)}}flush(){var e,r;let i=(r=(e=this.payload)===null||e===void 0?void 0:e.ReactDOM)===null||r===void 0?void 0:r.flushSync;i?i(()=>this.update()):this.update()}load(){return Promise.resolve(null)}update(){var e,r,i;if(this.payload==null||!this.render)return;let{React:n,ReactDOM:s,ReactDOMClient:o}=this.payload||{};if(!n)throw new Error(`${this.tagName}: React is not present in payload`);if(!s)throw new Error(`${this.tagName}: ReactDOM is not present in payload`);!this.refs.topReact&&!this.forceUpdateReact?o?(this.reactRoot||(this.reactRoot=o.createRoot(this.getReactRootElement())),this.reactRoot.render(this.getReactElement())):s.render(this.getReactElement(),this.getReactRootElement()):this.forceUpdateReact?(e=this.forceUpdateReact)===null||e===void 0||e.call(this):(i=(r=this.refs.topReact).forceUpdateReact)===null||i===void 0||i.call(r)}invokeReactRendering(){let{React:e,ReactDOM:r}=this.payload||{};if(!this.connected)return null;let i=this.descendants.filter(n=>n.refs.parentReact==this&&n.payload).map((n,s)=>this.getReactElement(n));return this.render({...this.props,children:i},this.payload)}getReactErrorBoundary(e=this,r=e.tagName){if(this.reactErrorBoundary)return this.reactErrorBoundary;let{React:i,ReactDOM:n}=e.payload||{};return this.reactErrorBoundary||(this.reactErrorBoundary=class extends i.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromError(o){return{error:o}}componentDidCatch(o,a){console.error(`FEAAS: ${e.tagName} Error:`,o,a),e.onError(o,"react")}render(){if(!this.state.error)return this.props.children}})}getReactElement(e=this,r){let{React:i,ReactDOM:n}=e.payload||{},s=this.getReactErrorBoundary(),o=this.getReactWrapper(e);return i.createElement(s,{key:e.tagName+"-"+e.getUID(),slot:e.getAttribute("slot")},i.createElement(o,null))}getReactWrapper(e=this,r=e.tagName){if(e.reactWrapper)return e.reactWrapper;let{React:i,ReactDOM:n}=e.payload||{};return e.reactWrapper=s=>{if(e.render){let[o,a]=i.useReducer(l=>l+1,0);return e.forceUpdateReact=a,n.createPortal(i.createElement(i.Fragment,null,e.invokeReactRendering()),e.getReactRootElement())}else return e.update()},Object.assign(e.reactWrapper,{key:e.tagName+"-"+e.getUID(),displayName:r}),e.reactWrapper}getUID(){return this.uid||(this.uid=String(Math.random()))}getShadowRoot(){return this.shadowRoot||this.attachShadow({mode:"open"}),this.shadowRoot}getReactRootElement(){return this.useShadowRoot?this.getShadowRoot():this.getRoot()}set(e){try{this.scheduleRender(),this.overrides={...this.overrides,...e},this.props={...this.getProps(),...this.overrides};for(var r in this.props){let i=this.props[r],n=r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();i==null||i===this.defaultProps[r]?this.removeAttribute(n):(typeof i=="string"||typeof i=="number"||typeof i=="boolean")&&this.getAttribute(n)!=String(i)&&this.setAttribute(n,String(i))}}catch(i){this.whenRendered.reject(i),this.onError(i,"set")}return this}import(e){return import( /*@vite-ignore*/ /* webpackIgnore: true */ e)}scheduleRender(){this.nextRender==null&&(this.whenRendered=this.whenRendered.restart()),cancelAnimationFrame(this.nextRender),this.nextRender=requestAnimationFrame(()=>{this.nextRender=null,this.advance().catch(e=>{})})}formatURL(e,r){return typeof e=="string"&&e.match(/^\/[^\/]/)?r+e:e}getContextAttribute(e,r=this){for(var i=this;i=i.parentElement||(i.parentNode instanceof ShadowRoot?i.parentNode.host:null);)if(i.getAttribute(e)!=null)return i.getAttribute(e);return this.getAttribute(e)}static register(e,r){r==null&&(r=typeof window!="undefined"?window:null),r&&!r.customElements.get(e)&&r.customElements.define(e,this)}};var L=class extends b{load(){return Promise.all([import( /*@vite-ignore*/ /* webpackIgnore: true */ "https://cdn.skypack.dev/react"),import( /*@vite-ignore*/ /* webpackIgnore: true */ "https://cdn.skypack.dev/react-dom")]).then(([e,r])=>({React:e,ReactDOM:r}))}render({},{React:e}){return e.createElement(e.Fragment,null)}},ht=class extends L{constructor(){super(...arguments),this.useShadowRoot=!0}getProps(){return{counter:parseFloat(this.getAttribute("counter"))}}render({counter:e},{React:r}){let[i,n]=r.useState(0);return r.useEffect(()=>{n(s=>s+1)},[e]),r.createElement(r.Fragment,null,r.createElement("p",null,"Rendering attribute: ",e),r.createElement("p",null,"Triggered updates: ",i))}};ht.observedAttributes=["counter"];function _(t){return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(t)}function Mt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ot(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Lt(t,e,r){return e&&Ot(t.prototype,e),r&&Ot(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V(t,e)}function H(t){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},H(t)}function V(t,e){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},V(t,e)}function $t(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function W(t,e,r){return $t()?W=Reflect.construct.bind():W=function(n,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(n,a),u=new l;return o&&V(u,o.prototype),u},W.apply(null,arguments)}function ne(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function pt(t){var e=typeof Map=="function"?new Map:void 0;return pt=function(i){if(i===null||!ne(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,n)}function n(){return W(i,arguments,H(this).constructor)}return n.prototype=Object.create(i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),V(n,i)},pt(t)}function oe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function se(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oe(t)}function ae(t){var e=$t();return function(){var i=H(t),n;if(e){var s=H(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return se(this,n)}}function le(t){return de(t)||ue(t)||Bt(t)||ce()}function de(t){if(Array.isArray(t))return ft(t)}function ue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Bt(t,e){if(t){if(typeof t=="string")return ft(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ft(t,e)}}function ft(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function ce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function he(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Bt(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(l){throw l},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){r=r.call(t)},n:function(){var l=r.next();return s=l.done,l},e:function(l){o=!0,a=l},f:function(){try{!s&&r.return!=null&&r.return()}finally{if(o)throw a}}}}var w=Object.prototype.hasOwnProperty;function T(t,e){return t=t.slice(),t.push(e),t}function mt(t,e){return e=e.slice(),e.unshift(t),e}var pe=function(t){ie(r,t);var e=ae(r);function r(i){var n;return Mt(this,r),n=e.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),n.avoidNew=!0,n.value=i,n.name="NewError",n}return Lt(r)}(pt(Error));function f(t,e,r,i,n){if(!(this instanceof f))try{return new f(t,e,r,i,n)}catch(l){if(!l.avoidNew)throw l;return l.value}typeof t=="string"&&(n=i,i=r,r=e,e=t,t=null);var s=t&&_(t)==="object";if(t=t||{},this.json=t.json||r,this.path=t.path||e,this.resultType=t.resultType||"value",this.flatten=t.flatten||!1,this.wrap=w.call(t,"wrap")?t.wrap:!0,this.sandbox=t.sandbox||{},this.preventEval=t.preventEval||!1,this.parent=t.parent||null,this.parentProperty=t.parentProperty||null,this.callback=t.callback||i||null,this.otherTypeCallback=t.otherTypeCallback||n||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},t.autostart!==!1){var o={path:s?t.path:e};s?"json"in t&&(o.json=t.json):o.json=r;var a=this.evaluate(o);if(!a||_(a)!=="object")throw new pe(a);return a}}f.prototype.evaluate=function(t,e,r,i){var n=this,s=this.parent,o=this.parentProperty,a=this.flatten,l=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=i||this.otherTypeCallback,e=e||this.json,t=t||this.path,t&&_(t)==="object"&&!Array.isArray(t)){if(!t.path&&t.path!=="")throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!w.call(t,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');var u=t;e=u.json,a=w.call(t,"flatten")?t.flatten:a,this.currResultType=w.call(t,"resultType")?t.resultType:this.currResultType,this.currSandbox=w.call(t,"sandbox")?t.sandbox:this.currSandbox,l=w.call(t,"wrap")?t.wrap:l,this.currPreventEval=w.call(t,"preventEval")?t.preventEval:this.currPreventEval,r=w.call(t,"callback")?t.callback:r,this.currOtherTypeCallback=w.call(t,"otherTypeCallback")?t.otherTypeCallback:this.currOtherTypeCallback,s=w.call(t,"parent")?t.parent:s,o=w.call(t,"parentProperty")?t.parentProperty:o,t=t.path}if(s=s||null,o=o||null,Array.isArray(t)&&(t=f.toPathString(t)),!(!t&&t!==""||!e)){var d=f.toPathArray(t);d[0]==="$"&&d.length>1&&d.shift(),this._hasParentSelector=null;var h=this._trace(d,e,["$"],s,o,r).filter(function(c){return c&&!c.isParentSelector});return h.length?!l&&h.length===1&&!h[0].hasArrExpr?this._getPreferredOutput(h[0]):h.reduce(function(c,p){var E=n._getPreferredOutput(p);return a&&Array.isArray(E)?c=c.concat(E):c.push(E),c},[]):l?[]:void 0}};f.prototype._getPreferredOutput=function(t){var e=this.currResultType;switch(e){case"all":{var r=Array.isArray(t.path)?t.path:f.toPathArray(t.path);return t.pointer=f.toPointer(r),t.path=typeof t.path=="string"?t.path:f.toPathString(t.path),t}case"value":case"parent":case"parentProperty":return t[e];case"path":return f.toPathString(t[e]);case"pointer":return f.toPointer(t.path);default:throw new TypeError("Unknown result type")}};f.prototype._handleCallback=function(t,e,r){if(e){var i=this._getPreferredOutput(t);t.path=typeof t.path=="string"?t.path:f.toPathString(t.path),e(i,r,t)}};f.prototype._trace=function(t,e,r,i,n,s,o,a){var l=this,u;if(!t.length)return u={path:r,value:e,parent:i,parentProperty:n,hasArrExpr:o},this._handleCallback(u,s,"value"),u;var d=t[0],h=t.slice(1),c=[];function p(g){Array.isArray(g)?g.forEach(function(m){c.push(m)}):c.push(g)}if((typeof d!="string"||a)&&e&&w.call(e,d))p(this._trace(h,e[d],T(r,d),e,d,s,o));else if(d==="*")this._walk(e,function(g){p(l._trace(h,e[g],T(r,g),e,g,s,!0,!0))});else if(d==="..")p(this._trace(h,e,r,i,n,s,o)),this._walk(e,function(g){_(e[g])==="object"&&p(l._trace(t.slice(),e[g],T(r,g),e,g,s,!0))});else{if(d==="^")return this._hasParentSelector=!0,{path:r.slice(0,-1),expr:h,isParentSelector:!0};if(d==="~")return u={path:T(r,d),value:n,parent:i,parentProperty:null},this._handleCallback(u,s,"property"),u;if(d==="$")p(this._trace(h,e,r,null,null,s,o));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(d))p(this._slice(d,h,e,r,i,n,s));else if(d.indexOf("?(")===0){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");var E=d.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1");this._walk(e,function(g){l._eval(E,e[g],g,r,i,n)&&p(l._trace(h,e[g],T(r,g),e,g,s,!0))})}else if(d[0]==="("){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");p(this._trace(mt(this._eval(d,e,r[r.length-1],r.slice(0,-1),i,n),h),e,r,i,n,s,o))}else if(d[0]==="@"){var v=!1,x=d.slice(1,-2);switch(x){case"scalar":(!e||!["object","function"].includes(_(e)))&&(v=!0);break;case"boolean":case"string":case"undefined":case"function":_(e)===x&&(v=!0);break;case"integer":Number.isFinite(e)&&!(e%1)&&(v=!0);break;case"number":Number.isFinite(e)&&(v=!0);break;case"nonFinite":typeof e=="number"&&!Number.isFinite(e)&&(v=!0);break;case"object":e&&_(e)===x&&(v=!0);break;case"array":Array.isArray(e)&&(v=!0);break;case"other":v=this.currOtherTypeCallback(e,r,i,n);break;case"null":e===null&&(v=!0);break;default:throw new TypeError("Unknown value type "+x)}if(v)return u={path:r,value:e,parent:i,parentProperty:n},this._handleCallback(u,s,"value"),u}else if(d[0]==="`"&&e&&w.call(e,d.slice(1))){var A=d.slice(1);p(this._trace(h,e[A],T(r,A),e,A,s,o,!0))}else if(d.includes(",")){var G=d.split(","),N=he(G),Y;try{for(N.s();!(Y=N.n()).done;){var kt=Y.value;p(this._trace(mt(kt,h),e,r,i,n,s,!0))}}catch(g){N.e(g)}finally{N.f()}}else!a&&e&&w.call(e,d)&&p(this._trace(h,e[d],T(r,d),e,d,s,o,!0))}if(this._hasParentSelector)for(var k=0;k<c.length;k++){var M=c[k];if(M&&M.isParentSelector){var P=this._trace(M.expr,e,M.path,i,n,s,o);if(Array.isArray(P)){c[k]=P[0];for(var lt=P.length,B=1;B<lt;B++)k++,c.splice(k,0,P[B])}else c[k]=P}}return c};f.prototype._walk=function(t,e){if(Array.isArray(t))for(var r=t.length,i=0;i<r;i++)e(i);else t&&_(t)==="object"&&Object.keys(t).forEach(function(n){e(n)})};f.prototype._slice=function(t,e,r,i,n,s,o){if(Array.isArray(r)){var a=r.length,l=t.split(":"),u=l[2]&&Number.parseInt(l[2])||1,d=l[0]&&Number.parseInt(l[0])||0,h=l[1]&&Number.parseInt(l[1])||a;d=d<0?Math.max(0,d+a):Math.min(a,d),h=h<0?Math.max(0,h+a):Math.min(a,h);for(var c=[],p=d;p<h;p+=u){var E=this._trace(mt(p,e),r,i,n,s,o,!0);E.forEach(function(v){c.push(v)})}return c}};f.prototype._eval=function(t,e,r,i,n,s){this.currSandbox._$_parentProperty=s,this.currSandbox._$_parent=n,this.currSandbox._$_property=r,this.currSandbox._$_root=this.json,this.currSandbox._$_v=e;var o=t.includes("@path");o&&(this.currSandbox._$_path=f.toPathString(i.concat([r])));var a="script:"+t;if(!f.cache[a]){var l=t.replace(/@parentProperty/g,"_$_parentProperty").replace(/@parent/g,"_$_parent").replace(/@property/g,"_$_property").replace(/@root/g,"_$_root").replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1");o&&(l=l.replace(/@path/g,"_$_path")),f.cache[a]=new this.vm.Script(l)}try{return f.cache[a].runInNewContext(this.currSandbox)}catch(u){throw new Error("jsonPath: "+u.message+": "+t)}};f.cache={};f.toPathString=function(t){for(var e=t,r=e.length,i="$",n=1;n<r;n++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(e[n])||(i+=/^[\*0-9]+$/.test(e[n])?"["+e[n]+"]":"['"+e[n]+"']");return i};f.toPointer=function(t){for(var e=t,r=e.length,i="",n=1;n<r;n++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(e[n])||(i+="/"+e[n].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return i};f.toPathArray=function(t){var e=f.cache;if(e[t])return e[t].concat();var r=[],i=t.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,function(s,o){return"[#"+(r.push(o)-1)+"]"}).replace(/\[["']((?:(?!['\]])[\s\S])*)["']\]/g,function(s,o){return"['"+o.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/["']?\.["']?(?!(?:(?!\[)[\s\S])*\])|\[["']?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function(s,o){return";"+o.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,""),n=i.split(";").map(function(s){var o=s.match(/#([0-9]+)/);return!o||!o[1]?s:r[o[1]]});return e[t]=n,e[t].concat()};var fe=function(e,r,i){for(var n=e.length,s=0;s<n;s++){var o=e[s];i(o)&&r.push(e.splice(s--,1)[0])}},me=function(){function t(e){Mt(this,t),this.code=e}return Lt(t,[{key:"runInNewContext",value:function(r){var i=this.code,n=Object.keys(r),s=[];fe(n,s,function(d){return typeof r[d]=="function"});var o=n.map(function(d,h){return r[d]}),a=s.reduce(function(d,h){var c=r[h].toString();return/function/.test(c)||(c="function "+c),"var "+h+"="+c+";"+d},"");i=a+i,!/(["'])use strict\1/.test(i)&&!n.includes("arguments")&&(i="var arguments = undefined;"+i),i=i.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"");var l=i.lastIndexOf(";"),u=l>-1?i.slice(0,l+1)+" return "+i.slice(l+1):" return "+i;return W(Function,n.concat([u])).apply(void 0,le(o))}}]),t}();f.prototype.vm={Script:me};function gt(t,e,r=!1,i=t){var n=e;let s=Object.keys(t).sort((a,l)=>l.length-a.length);for(let a of s)if(e.startsWith(a)){if(a==e){if(r)return t[a];continue}n=e.substring(a.length+1),i=t[a];break}var o=f({path:n,json:i});return Array.isArray(o)&&(o==null?void 0:o.length)==0&&(o=[n.replace(/^.*?\./,"_."),n.replace(/^.*?\./,""),n.replace(/^([^.]+).*?\.\$\./,"$1."),n.replace(/^.*?\.\$\./,"_."),n.replace(/^.*?\.\$\./,""),n.replace(/^[^.]+$/,"_")].filter((a,l,u)=>u.indexOf(a)===l).reduce((a,l)=>a.length>0?a:f({path:l,json:i}),[])),r&&Array.isArray(o)?o[0]:o}function vt(t,e={},r){return r?`<${r}${Object.entries(e).map(([i,n])=>n!=null&&` ${i}="${n}"`).filter(Boolean).join("")}>${z(t)}</${r}>`.replace(/^<([a-z0-9][^>]*)><\/[^>]+>$/,"<$1 />"):z(t)}function z(t){var e;if(Array.isArray(t))return t.map(z).join(`
`).trim();if(typeof t=="string")return t;if(t==null)return"";switch(t.type){case"heading":let{level:r,...i}=t.attrs;return vt(t.content,i,"h"+r);case"text":return(t.marks||[]).reduce((n,s)=>vt(n,s.attrs,{link:"a",bold:"strong",italic:"em",strike:"s",underline:"u"}[s.type]),(e=t.text)===null||e===void 0?void 0:e.replace(/\s+/," "));default:return vt(t.content||t.text,t.attrs,{bulletList:"ul",orderedList:"ol",listItem:"li",horizontalRule:"hr",paragraph:"p",codeBlock:"code",blockquote:"blockquote"}[t.type])}}var O=class{constructor(e,r=1,i){this.ownerDocument={createElement(n){return new O(n)}},this.nodeName=e,this.nodeType=r,this.textContent=i,this.attributes=[],this.childNodes=[]}setAttribute(e,r){let i=this.attributes.find(n=>n.name===e);i?i.value=r:this.attributes.push({name:e,value:r})}getAttribute(e){let r=this.attributes.find(i=>i.name===e);return r?r.value:void 0}insertBefore(e,r){if(e.parentNode=this,r===null)this.childNodes.push(e);else{let i=this.childNodes.indexOf(r);i!==-1&&this.childNodes.splice(i,0,e)}}removeAttribute(e){let r=this.attributes.findIndex(i=>i.name===e);r!==-1&&this.attributes.splice(r,1)}appendChild(e){e.parentNode=this,this.childNodes.push(e)}get tagName(){var e;return(e=this.nodeName)===null||e===void 0?void 0:e.toUpperCase()}get localName(){var e;return(e=this.nodeName)===null||e===void 0?void 0:e.toLowerCase()}get innerHTML(){return yt(this.childNodes)}set innerHTML(e){this.childNodes=bt(String(e!=null?e:""))}get outerHTML(){return yt([this])}get children(){return this.childNodes.filter(e=>e.nodeType==1)}closest(e){let r=this;for(;r;){if(It(e,r))return r;r=r.parentNode}return null}querySelectorAll(e){let r=e.split(/\s*,\s*/),i=[],n=s=>{for(let o of r)if(It(o,s)){i.push(s);break}for(let o of s.childNodes)n(o)};for(let s of this.childNodes)n(s);return i}querySelector(e){return this.querySelectorAll(e)[0]}findSibling(e,r){if(!this.parentNode)return null;let i=this.parentNode.childNodes,n=i.indexOf(this);if(n===-1)return null;for(let s=n+e;s>=0&&s<i.length;s+=e){let o=i[s];if(!r||o.nodeType===1)return o}return null}removeChild(e){let r=this.childNodes.indexOf(e);if(r!==-1)return this.childNodes.splice(r,1),e.parentNode=void 0,e}get previousSibling(){return this.findSibling(-1)}get nextSibling(){return this.findSibling(1)}get previousElementSibling(){return this.findSibling(-1,!0)}get nextElementSibling(){return this.findSibling(1,!0)}cloneNode(e=!1){let r=new O(this.nodeName,this.nodeType);if(r.attributes=JSON.parse(JSON.stringify(this.attributes)),this.textContent&&(r.textContent=this.textContent),e)for(let i of this.childNodes){let n=i.cloneNode(!0);r.appendChild(n)}return r}get parentElement(){var e;return((e=this.parentNode)===null||e===void 0?void 0:e.nodeType)==1?this.parentNode:null}};function It(t,e){let r=t.match(/([.#]?[\w-]+|\[([\w-]+)(="([^"]*)")?\])/g);if(!r)return!1;for(let i of r)if(i.startsWith("#")){if(e.getAttribute("id")!==i.slice(1))return!1}else if(i.startsWith(".")){if(!(e.getAttribute("class")||"").split(" ").includes(i.slice(1)))return!1}else if(i.startsWith("[")){let n=i.match(/^\[([\w-]+)(="([^"]*)")?\]$/);if(n){let s=n[1],o=n[3],a=e.getAttribute(s);if(typeof o=="undefined"){if(a===void 0)return!1}else if(a!==o)return!1}else return!1}else if(e.nodeName!==i)return!1;return!0}function bt(t){var e;let r=[],i=[];for(;t;){let n=t.match(/^<([\w-]+)(\s[^>]*)?>/),s=t.match(/^<\/([\w-]+)>/);if(n){let o=n[1],l=((e=(n[2]||"").match(/([\w-]+)(="([^"]*)")?/g))===null||e===void 0?void 0:e.map(d=>{let[h,c,,p]=d.match(/([\w-]+)(="([^"]*)")?/);return{name:c,value:ge(p||"")}}))||[],u=new O(o,1);if(u.attributes=l,i.length>0){let d=i[i.length-1];d.childNodes.push(u),u.parentNode=d}else r.push(u);i.push(u),t=t.slice(n[0].length)}else if(s)i.pop(),t=t.slice(s[0].length);else{let o=t.indexOf("<"),a=t.slice(0,o!==-1?o:void 0),l=new O("#text",3);if(l.textContent=a,i.length>0){let u=i[i.length-1];u.childNodes.push(l),l.parentNode=u}else r.push(l);t=t.slice(a.length)}}return r}function ve(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function ge(t){return t.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'")}function yt(t){return t.map(e=>{if(e.nodeType===3)return e.textContent||"";let{nodeName:r,attributes:i}=e,n=i.map(({name:o,value:a})=>` ${o}="${ve(String(a))}"`).join(""),s=yt(e.childNodes);return["img","input","br"].includes(r)?`<${r}${n} />`:`<${r}${n}>${s}</${r}>`}).join("")}function ye(t){let e=new t.ownerDocument.defaultView.MutationObserver(r=>{r.forEach(i=>{let n=i.target,s=n.getAttribute("data-embed-src");s&&Q(n,s),i.addedNodes&&i.addedNodes.forEach(o=>{o.nodeType==1&&be(o,!1)})})});return e.observe(t,{attributes:!0,subtree:!0,childList:!0}),e}function be(t,e=!0){let r=t.querySelectorAll("[data-embed-src]");for(var i=0;i<r.length;i++){let n=r[i];Q(n,n.getAttribute("data-embed-src"))}if(e)return ye(t)}function Q(t,e){for(var r=t;r;r=r.parentElement)if(!r.parentElement){let n=r.querySelectorAll("script");for(var i=0;i<n.length;i++)if(n[i].getAttribute("src")==e)return!0;r.tagName=="HTML"&&(r=r.querySelector("head")||r);let s=r.ownerDocument.createElement("script");s.setAttribute("type","module"),s.setAttribute("src",e),r.appendChild(s);break}}var Ze=t=>{var e;let r=parseInt((e=t==null?void 0:t.match(/\[0:(\d+)\]/))===null||e===void 0?void 0:e[1],10);return!isNaN(r)&&r>0?String(r):null},Xe=t=>{var e;let r=(e=t==null?void 0:t.match(/\[([^\]]+)\]/))===null||e===void 0?void 0:e[1].split(/\s*,\s*/g).filter(Boolean).map(i=>{if(i.match(/^-?\d+$/))return i;let n=i.match(/^(\d+):(\d+)$/);return n&&parseInt(n[1],10)<parseInt(n[2],10)?n[1]+"-"+n[2]:null});return r!=null&&r.every(Boolean)?r.join(","):null},tr=t=>{var e;return(e=t==null?void 0:t.match(/(\.\*|\[[^\]]+\])$/))===null||e===void 0?void 0:e[0]};function Ae(t){return t.replace(/(\[[^\]\[]+\]|\.\*)$/g,"")}function Ut(t){return Ae(t)+".*"}function Wt(t){let e=t.getAttribute("data-path-scope");for(var r=0,i=t;i=i.previousElementSibling;)i.getAttribute("data-path-scope")==e&&r++;return r}function we(t,e,r){let i=t.getAttribute("data-path-scope");if(i==null)return;var n=Wt(t);if(n!=0)return;let s=t.parentNode;if(s!=null){e==0?t.setAttribute("hidden","hidden"):t.getAttribute("hidden")!=null&&t.removeAttribute("hidden");for(var o=n+1,a=t,l=t;l=l.nextElementSibling;)l.getAttribute("data-path-scope")==i&&(o++,a=l);for(var u=o;u<e;u++)s.insertBefore(a.cloneNode(!0),a.nextElementSibling);for(var u=Math.max(1,e);u<o;u++)a=a.previousElementSibling,s.removeChild(a.nextElementSibling)}}function J(t,e,r,i){var n,s;if(t){var o=t;(r==null?void 0:r.type)=="doc"&&Array.isArray(r.content)&&(r=z(r)),i!=null&&i.processValue&&(r=i==null?void 0:i.processValue(t,e,r));var a=e.replace("data-path-","");if(e=="data-path-src"){let c=Array.from(t.children).find(p=>p.localName=="picture")||t;o=t.localName=="img"?t:c.querySelector("img, video")}else if(e=="data-path-href")o=t.querySelector("a")||t.closest("a");else if(e=="data-path-alt")o=(Array.from(t.children).find(p=>p.localName=="picture")||t).querySelector("img, picture");else if(e=="data-path-hidden")r=r?null:!0;else if(e=="data-path"||e=="data-embed-html"||e=="html")a="innerHTML";else if(e=="data-embed-src")Q(t,r);else if(e=="data-path-attributes"){let c=((n=t.getAttribute("data-attributes-keys"))===null||n===void 0?void 0:n.split(",").filter(Boolean))||[];if(!Array.isArray(r))for(var l in r){var u=r[l];J(t,l,typeof u=="object"&&u?JSON.stringify(u):u,i)}for(var d=0;d<c.length;d++)(r==null||!(c[d]in r))&&J(t,c[d],null,i);J(t,"data-attributes-keys",Object.keys(r||{}).join(","));return}if(typeof r=="boolean"&&(r=r?"":null),!!o){var h=String((s=t.getAttribute("data-path-placeholder")||o[a])!==null&&s!==void 0?s:o.getAttribute(a));r!=null?a=="innerHTML"?o.innerHTML!=r&&(o.innerHTML=r):o.getAttribute(a)!=r&&o.setAttribute(a,r):a=="innerHTML"?o.innerHTML=h:o.removeAttribute(a)}}}var jt=["data-attributes-keys","data-path-attributes","data-path-scope"];function F(t,e,r,i){var n,s,o;let a=t;if(i||(e=((n=r==null?void 0:r.processData)===null||n===void 0?void 0:n.call(r,a,e))||e),a.nodeType==1){let d=a.getAttribute("data-path-scope");if(d){let c=Wt(a),p=gt(e,d,!1)||[];c==0&&we(a,((s=r==null?void 0:r.shouldRepeat)===null||s===void 0?void 0:s.call(r,a,p))===!1?1:p.length,r),e={...e,[Ut(d)]:p[c]}}let h=Array.prototype.slice.call(a.attributes).sort((c,p)=>jt.indexOf(c.name)-jt.indexOf(p.name));for(var l=0;l<h.length;l++){let{name:c,value:p}=h[l];c.startsWith("data-path")&&c!="data-path-scope"&&J(a,c,gt(e,p,!0),r),c=="data-embed-src"&&J(a,c,a.getAttribute(c),r)}}for(var l=0,u;u=a.childNodes[l++];)Ht(u)&&F(u,e,r,!0);return i||(o=r==null?void 0:r.onRender)===null||o===void 0||o.call(r,a,e),a}function Ht(t){return t.nodeType==1}function q(t,e,r,i){var n;let s=((n=i==null?void 0:i.processTemplate)===null||n===void 0?void 0:n.call(i,t,e,r))||e;if(t.innerHTML=s,t.classList.add("-feaas"),(t.closest(".component.feaas")||t).className.includes("-theme--"))for(var a=0,l;l=t.childNodes[a++];)Ht(l)&&(l.className=l.className.replace(/(\s|^)-theme--[^\s]+\s*/g,"$1"));return F(t,r,i)}function sr(t,e,r,i=!1){var n;let s=((n=r==null?void 0:r.processTemplate)===null||n===void 0?void 0:n.call(r,null,t,e))||t;if(typeof document=="undefined"||i){let o=bt(s);return F(o[0],e,r).outerHTML}else{let o=document.createElement("div");return o.innerHTML=s,F(o,e,r),o.innerHTML}}var Vt=["initial","check","updated"],Z={};function dr(){Z={}}async function X(t,e,r,i,n=Z){return $({url:t,options:e,validator:r,callback:i,cache:n}).then(tt).then(s=>s.response)}function Ee(t,e=!1){let r=String(t).replace("?head","");var i=Z[r];return!i&&!e&&(i=Z[r]={phase:null,initial:R(),check:R(),updated:R(),final:R()}),i}var At=class extends Error{};async function $({url:t,options:e,validator:r,callback:i,cache:n},s="initial"){let o=new Date;if(n!=null){var a=Ee(t);if(Vt.indexOf(a.phase)>=Vt.indexOf(s))var l=a[s];else a.phase=s}let u=await(l||fetch(t,e));if(!l&&a&&(u.ok?a[s].resolve(u):a[s].reject(new Error("Fetch failed"))),!u.ok)throw new Error("Fetch failed");let d=new Date(u.headers.get("date"))<o||l&&s=="initial"&&(a.phase=="updated"||a.phase=="check");if((r==null?void 0:r(u,d))===!1)throw new At("Response is not valid");return await(i==null?void 0:i(u,s,d)),{url:t,options:e,isCached:d,response:u,validator:r,callback:i,cache:n}}async function tt(t){let{url:e,isCached:r,options:i,validator:n,response:s,cache:o}=t;if(r){let{response:a}=await $({url:e+"?head",options:{...i,method:"HEAD",cache:"no-cache"},validator:n,cache:o},"check");if(a.headers.get("last-modified")!=s.headers.get("last-modified"))return wt(t)}return t}async function wt(t){return $({...t,options:{...t.options,cache:"reload"}},"updated")}var D="https://feaas.blob.core.windows.net";function et(t){let e=t.match(/^(?:(.*?)\/components)?\/?([^\/]+)\/([^\/]+)(?:\/([^\/]+)(?:\/(published|staged|saved|\d+)(?:\.html?)?)?)?$/);if(e){var[,r,i,n,s,o]=e;return{cdn:r,library:i,component:n,version:s,revision:o}}}function hr(t){if(!t||!t.library||!t.component)throw new Error("Component requires `library` and `component` properties");return`${t.cdn&&t.cdn!=D?`${t.cdn}/components`:""}/${t.library}/${t.component}/${!t.version||t.version=="responsive"&&(!t.revision||t.revision=="published")?"":t.version}/${!t.revision||t.revision=="published"?"":t.revision}`.replace(/(^\/|\/$|\/\/)(?!.+\/components\/)/g,"")}function pr(t){return`${t.cdn&&t.cdn!=D?`${t.cdn}/styles/`:""}${t.library}/${!t.revision||t.revision=="published"?"":t.revision}`.replace(/\/$|\/\/(?!.+\/styles\/)/g,"")}function Et(t){let e=t.match(/^(?:(.*?)\/styles\/)?([^\/]+)(?:\/(published|staged|saved|\d+)(?:.css)?)?$/);if(e){var[,r,i,n]=e;return{cdn:r,library:i,revision:n}}else{let s=et(t);if(s){var{cdn:r,library:i,revision:n}=s;return n!=null&&n.match(/\d/)&&(n=void 0),{cdn:r,library:i,revision:n}}}}function zt(t){return typeof t=="string"&&(t={src:t}),"src"in t&&(t={...et(t.src)}),`${t.cdn||t.hostname||D}/components/${t.library}/${t.component}/${t.version}/${t.revision||"published"}.html`}function rt(t){return typeof t=="string"&&(t={src:t}),"src"in t&&(t={...Et(t.src)}),`${t.cdn||t.hostname||D}/styles/${t.library}/${t.revision||"published"}.css`}async function K(t,e,r=!1){let i=a=>a.headers.get("x-ms-meta-versionDeletedAt")==null,n=a=>a.clone().text().then(e),s=await Promise.all([t.instance&&$({options:{headers:{Accept:"text/html"},credentials:"omit"},url:zt({...t,version:t.instance}),validator:i}).catch(a=>a),$({url:zt(t),validator:i}).catch(a=>a)]),o=s.find(a=>a&&"isCached"in a&&a);if(!o||o instanceof Error)throw s.find(l=>l&&l instanceof Error)||new Error("Can not fetch component");return s[0]==o&&console.log("Using fork!",s),await n(o.response),r?o:tt({...o,callback:n}).catch(a=>{if(s[0]==o&&(wt({...o,callback:null,validator:null}),console.log("Fork was deleted"),!(s[1]instanceof Error)))return n(s[1].response),tt({...s[1],callback:n});throw a})}async function fr(t){typeof t=="string"&&(t={src:t});var e;let{response:r}=await K(t,i=>{e=i},!0);return{...t,template:e,lastModified:r.headers.get("last-modified")}}async function xt(t,e){return typeof t=="string"&&(t={src:t}),X(rt(t),{headers:{Accept:"text/css"},credentials:"omit"},r=>r.headers.get("x-ms-meta-deletedAt")==null,(r,i)=>r.clone().text().then(n=>e(n,i)))}function gr(t,e){return xe(t,e||(e=document.createElement("style"))),e}function xe(t,e){return e||(e=document.createElement("style")),xt(t,(r,i)=>{e.textContent=r}).then(()=>e)}function Ct(t,e){var r=Ce(t);if(!r)var i=Se(t);return xt(t,(n,s)=>{i&&(i.textContent=n),e==null||e(n,s)}).then(()=>r||i)}function Jt(t){return new Promise((e,r)=>{Ct(t,e).catch(r)})}function Ce(t){return document.head.querySelector(`style[data-href="${rt(t)}"]`)}function Se(t){let e=rt(t),r=document.createElement("style");return r.setAttribute("data-href",e),document.head.appendChild(r),r}function wr(t,e){let r=document.createElement("div");r.innerHTML=t;let i=document.createDocumentFragment();for(;r.firstChild;)i.appendChild(r.firstChild);return F(i,e),r}function qt(t,e){return Re(t,e||(e=document.createElement("div"))),e}async function Re(t,e){return e||(e=document.createElement("div")),e.childNodes.length?F(e,t.data,t):"template"in t?q(e,t.template,t.data,t):K(t,r=>q(e,r,t.data,t)).then(()=>e)}function _e(t){var e,r,i,n,s,o,a,l;let u,d=t.getAttribute("src");if(d){let A=et(d);if(!A)throw new Error(`Could not parse FEAAS Component source: ${d}`);var{cdn:h,library:c,component:p,version:E,revision:v}=A}let x=t.getAttribute("data");if(x!=null&&x!="")try{u=typeof x=="string"?JSON.parse(x):{}}catch(A){}return{data:u||{},cdn:(r=(e=t.getContextAttribute("cdn"))!==null&&e!==void 0?e:h)!==null&&r!==void 0?r:D,library:(i=t.getAttribute("library"))!==null&&i!==void 0?i:c,component:(n=t.getAttribute("component"))!==null&&n!==void 0?n:p,version:(o=(s=t.getAttribute("version"))!==null&&s!==void 0?s:E)!==null&&o!==void 0?o:"responsive",revision:(l=(a=t.getAttribute("revision"))!==null&&a!==void 0?a:v)!==null&&l!==void 0?l:"published",hostname:t.getAttribute("hostname"),template:t.getAttribute("template"),instance:t.getAttribute("instance"),editable:t.getAttribute("editable")!=null,suspended:t.getAttribute("suspended")!=null,lastModified:t.getAttribute("last-modified"),withStylesheet:t.getAttribute("with-stylesheet")!="false"}}var it=class extends b{setData(e){this.set({data:e})}getProps(){return _e(this)}attributeChangedCallback(e,r,i){r!==i&&((e=="library"||e=="component"||e=="revision"||e=="version")&&(this.payload=void 0),this.needsRefresh=!0,super.attributeChangedCallback(e,r,i))}getEditor(){var e;return(e=document.querySelector("feaas-context"))===null||e===void 0?void 0:e.refs.editor}constructor(){super(),this.defaultProps={cdn:D,revision:"published",version:"responsive",withStylesheet:!0,editable:!1,suspended:!1},this.onLoad=e=>{this.payload=e,this.advance()},this.addEventListener("click",()=>{this.props.editable&&this.edit()})}edit(){let e=this.getEditor();if(e!=null&&e.setTarget(this))return e.open(),!0}getOriginal(){let e=this.getAttribute("data-path-scope");if(e){for(var r=this;(r=r.previousElementSibling)&&r.getAttribute("data-path-scope")==e;)var i=r;return i}}isReadyToLoad(){return super.isReadyToLoad()&&this.props.library!=null&&this.props.component!=null&&this.props.version!=null}async load(){if(!this.getOriginal()){if(this.props.withStylesheet)var e=Jt({...this.props,revision:"published"}).then(()=>{e=null,this.payload&&this.onLoad(this.payload)});return Promise.all([e,K(this.props,r=>{this.payload=r,e||this.onLoad(r)})]).then(()=>this.payload)}}update(){if(Array.from(this.children).filter(e=>e.tagName!="BR").length>0&&!this.needsRefresh)F(this,this.props.data);else{if(this.needsRefresh=!0,this.getOriginal())return;q(this,this.payload,this.props.data)}}};it.observedAttributes=["library","component","version","revision","hostname","cdn","template","data","instance","editable","with-stylesheet"];it.register("feaas-component");function Fe(t){return{opacity:t!=null&&t.getAttribute("opacity")?parseFloat(t==null?void 0:t.getAttribute("opacity")):1,hidden:(t==null?void 0:t.getAttribute("hidden"))!=null}}var nt=class extends b{constructor(){super(...arguments),this.defaultProps={hidden:!1}}getProps(){return Fe(this)}attributeChangedCallback(e,r,i){if(r!==i)return e=="hidden"&&(this.style.setProperty("display","block","important"),this.style.setProperty("transition","opacity 0.3s","important"),i?(this.style.setProperty("opacity","0","important"),this.style.pointerEvents="none"):(this.style.setProperty("opacity","1","important"),this.style.pointerEvents="all")),super.attributeChangedCallback(e,r,i)}connectedCallback(){this.payload=null,super.connectedCallback(),this.attributeChangedCallback("hidden",this.getAttribute("hidden"),this.getAttribute("hidden")),this.stylesheet=document.createElement("style"),this.stylesheet.textContent=`
  #loader {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f6f6ff;
    z-index: 1000;
  }
  @keyframes loader-circular-track {
    0% {
      stroke-dasharray: 1, 400;
      stroke-dashoffset: 0;
    }
    50% {
      stroke-dasharray: 400, 400;
      stroke-dashoffset: -100;
    }
    100% {
      stroke-dasharray: 400, 400;
      stroke-dashoffset: -260;
    }
  }
  
  @keyframes loader-circular-spinner {
    0% {
      transform: rotate(0deg);
    }
  
    100% {
      transform: rotate(360deg);
    }
  }
  #loader .spinner {
    width: 48px;
    height: 48px;
  }
  `,this.loader=document.createElement("div"),this.loader.id="loader",this.loader.innerHTML=`
  <div class="spinner">
    <svg
      viewBox="0 0 100 100"
      style="
        animation: 2s linear 0s infinite normal none running loader-circular-spinner;
        display: block;
        width: 48px;
        height: 48px;
      "
    >
      <circle fill="transparent" cx="50" cy="50" r="42" stroke="rgba(0,0,0,0.1)" stroke-width="10px"></circle>
      <circle
        fill="transparent"
        stroke="#5548D9"
        cx="50"
        cy="50"
        r="42"
        stroke-width="10px"
        stroke-linecap="round"
        style="animation: 1.5s linear 0s infinite normal none running loader-circular-track"
      ></circle>
    </svg>
  </div>`,this.getRoot().appendChild(this.stylesheet),this.getRoot().appendChild(this.loader)}update(){this.loader.style.opacity=String(this.props.opacity)}};nt.observedAttributes=["hidden","opacity"];nt.register("feaas-loader");function ke(t){var e,r,i,n;let s=t.getAttribute("src");if(s)var{cdn:o,library:a,revision:l}=Et(s);return{library:t==null?void 0:t.getContextAttribute("library"),revision:(r=(e=t==null?void 0:t.getAttribute("revision"))!==null&&e!==void 0?e:l)!==null&&r!==void 0?r:"published",cdn:(n=(i=t==null?void 0:t.getContextAttribute("cdn"))!==null&&i!==void 0?i:t==null?void 0:t.getContextAttribute("hostname"))!==null&&n!==void 0?n:D}}var St=class extends b{constructor(){super(...arguments),this.onLoad=e=>{this.payload=e,this.advance()}}getProps(){return ke(this)}isReadyToLoad(){return this.props.library!=null&&this.props.revision!=null&&this.props.cdn!=null}load(){return Ct(this.props,this.onLoad)}};St.register("feaas-stylesheet");var _t={};ee(_t,{convertBase64toBlob:()=>Kt,generate:()=>Qt,get:()=>De,getVersionForThumbnail:()=>Gt,load:()=>Yt,responseToImage:()=>Rt,upload:()=>Zt});var Kt=t=>fetch(t).then(e=>e.blob()),Rt=t=>t.blob().then(e=>new Promise((r,i)=>{let n=new Image;n.onerror=i,n.onload=()=>{r(n)},n.src=URL.createObjectURL(e)}));async function Gt(t){return t.versions.length||await t.versions.fetch(),t.getVersionForWidth(800)}async function De(t,e,r){try{if(!t.isNew)return await Yt(t,e,r)}catch(n){t.sdk.log(`FEAAS: Thumbnail ${t.id}, version: ${(e==null?void 0:e.id)||"responsive"}, status: generating ${status}, reason: ${n}`)}let i=await Qt(t,e);return r==null||r(i,!1),i&&!t.isNew&&Kt(i.src).then(n=>Zt(t,e,n)),i}async function Yt(t,e,r){let i=e?e.getThumbnailURL():t.getThumbnailURL(),n=t.library.stylesheet,s=new Date(Math.max(Number(t.modifiedAt),Number(n.modifiedAt)));t.sdk.log(`FEAAS: Thumbnail ${t.id}/${(e==null?void 0:e.id)||"responsive"}, loading`);var o;return await X(i,{},(a,l)=>{let u=Math.abs(Number(new Date(a.headers.get("x-ms-meta-componentRenderedAt")))-Number(s))<2e3;return l&&!u&&Rt(a).then(d=>{o=d,r(d,l)}),u},(a,l,u)=>{t.sdk.log(`FEAAS: Thumbnail ${t.id}/${(e==null?void 0:e.id)||"responsive"}, status: ${l}`),Rt(a).then(d=>{o=d,r(d,u)})},null),o}async function Qt(t,e){let r=e||(t.isNew?null:await Gt(t));if(!r||r.isViewEmpty())return null;let{stylesheet:i,datasources:n}=t.library;return await Ne(r.classList,i.getBreakpointForWidth(800,r.getBreakpoints()),r.view,n.reduce((o,a)=>Object.assign(o,{[a.id]:a.sample}),{}),i.css,t.sdk)}function Ne(t,e,r,i,n,s){let o=document.createElement("iframe");return o.style.position="absolute",o.style.top="-2000px",o.style.left="-2000px",o.style.width=e.props.minWidth+"px",o.style.height="720px",o.style.zIndex="100011",document.body.appendChild(o),new Promise((a,l)=>{let u=document.createElement("script");u.onerror=l,u.src=s.frontend+"/assets/html2canvas.js",u.onload=()=>{var c;(((c=o.contentWindow.document.fonts)===null||c===void 0?void 0:c.ready)||Promise.resolve()).then(function(){return o.contentWindow.html2canvas(h,{scale:Math.max(1.1,1e3/Math.min(1401,Math.max(320,e.props.minWidth))),width:Math.min(1401,Math.max(320,e.props.minWidth)),height:Math.max(1,Math.min(2e3,h.offsetHeight)),windowWidth:e.props.minWidth+"px",windowHeight:1e3,proxy:s.backend+"/proxy/media",backgroundColor:"#ffffff"}).then(p=>{let E=p.toDataURL("image/jpeg",.6);o.parentElement.removeChild(o);let v=new Image;v.onload=()=>{a(v)},v.onerror=l,v.src=E})})},o.contentWindow.document.head.appendChild(u);let d=o.contentWindow.document.createElement("style");d.textContent=`
      ${n}
      body, html { padding: 0; margin: 0; overflow: hidden }
    `,o.contentWindow.document.head.appendChild(d);let h=qt({template:r,data:i});h.classList.add(...t,"-feaas--preview","-emulate--"+e.details.slug),o.contentWindow.document.body.appendChild(h)})}async function Zt(t,e,r){let i=e?e.getThumbnailURL():t.getThumbnailURL(),n=new Date(Math.max(Number(t.modifiedAt),Number(t.library.stylesheet.modifiedAt)));try{await t.sdk.uploadBlob("thumbnails",i.split(/\/thumbnails\//)[1],r,{headers:{"x-ms-blob-content-type":"image/jpg","x-ms-blob-cache-control":"public,max-age=31536000,immutable","x-ms-meta-versionId":e?e.id:null,"x-ms-meta-versionRevision":e?e.revision.toString():null,"x-ms-meta-componentId":t.id,"x-ms-meta-componentRenderedAt":n.toUTCString(),"x-ms-meta-componentModifiedAt":t.modifiedAt.toUTCString(),"x-ms-meta-componentCreatedAt":t.createdAt.toUTCString(),"x-ms-meta-modifiedAt":t.modifiedAt.toUTCString()}}),fetch(i,{cache:"no-cache"}).then(()=>{t.sdk.log("FEAAS: Thumbnail uploaded",i)})}catch(s){t.sdk.log("FEAAS: Thumbnail failed to upload",i,s)}return i}var Ft;typeof window!="undefined"&&(window.FEAASElement=L,(Ft=window.FEAASLoading)!==null&&Ft!==void 0||(window.FEAASLoading=Promise.resolve()));function Pe(t){let e=[];if(t){let r=t.ownerDocument.defaultView,i,n;for(;r!==window.top;){i=r.parent;for(let s=0;s<i.frames.length;s++)if(i.frames[s]===r){for(let o of i.document.getElementsByTagName("iframe"))if(o.contentWindow===r){n=o.getBoundingClientRect();let a=o.contentWindow.getComputedStyle(o);e.push({left:n.left+parseInt(a.borderLeftWidth),top:n.top+parseInt(a.borderTopWidth)})}r=i;break}}}return e.reduce((r,i)=>({left:r.left+i.left,top:r.top+i.top}),{left:0,top:0})}function Te(t){var e;return{context:HTMLElement,frontend:t==null?void 0:t.getContextAttribute("frontend"),src:(e=t==null?void 0:t.getAttribute("src"))!==null&&e!==void 0?e:"/editor.js",library:t==null?void 0:t.getAttribute("library"),component:t==null?void 0:t.getAttribute("component"),version:t==null?void 0:t.getAttribute("version"),instance:t==null?void 0:t.getAttribute("instance"),forked:t==null?void 0:t.getAttribute("forked"),revision:(t==null?void 0:t.getAttribute("revision"))||"saved",hidden:(t==null?void 0:t.getAttribute("hidden"))!=null,for:t==null?void 0:t.getAttribute("for"),state:(t==null?void 0:t.getAttribute("state"))||"idle",changed:(t==null?void 0:t.getAttribute("changed"))!=null}}var ot=class extends b{constructor(){super(...arguments),this.framePoint={top:0,left:0},this.wrapperRect={top:0,left:0,width:0,height:0},this.bodyRect={top:0,left:0,width:0,height:0},this.defaultProps={hidden:!1},this.setTarget=(e,r={component:e.getAttribute("component"),version:e.getAttribute("version"),revision:e.getAttribute("revision"),instance:e.getAttribute("instance")})=>{if(!this.closing&&(!this.target||e==null))return this.set(r),this.target=e,!0},this.onChromeMeasureElement=(e,r=e.getBoundingClientRect())=>e.ownerDocument==document?{left:r.left-this.bodyRect.left,top:r.top-this.bodyRect.top,width:r.width,height:r.height}:{left:r.left+this.framePoint.left-this.bodyRect.left,top:r.top+this.framePoint.top-this.bodyRect.top,width:r.width,height:r.height},this.onBeforeMeasure=e=>{e.memoized.focusable&&(this.framePoint=Pe(e.memoized.focusable)),this.chrome&&(this.wrapperRect=this.chrome.positionable.getBoundingClientRect(),this.bodyRect=this.chrome.positionable.ownerDocument.body.parentElement.getBoundingClientRect())},this.onMeasure=()=>{},this.onPosition=({focusable:e,root:r})=>{!this.chrome||this.props.hidden||(e?(this.chrome.wrapper.style.width=e.width+16*2+"px",this.chrome.wrapper.style.height=e.height+16*1+64+"px",this.chrome.wrapper.style.left=e.left-16+"px",this.chrome.wrapper.style.top=e.top-64+"px",this.chrome.wrapper.style.opacity="1",this.chrome.absolute=this.querySelector(".ui.overlays"),this.chrome.absolute&&(this.chrome.absolute.style.left=r.left+"px",this.chrome.absolute.style.top=r.top+"px")):(this.chrome.wrapper.style.opacity="0",this.chrome.wrapper.style.left="-1000px",this.chrome.wrapper.style.top="-1000px"))},this.onWindowMessage=e=>{var r;switch((r=e.data)===null||r===void 0?void 0:r.type){case"feaasEdit":let i=this.getPlaceholder();this.setTarget(i.editable,e.data)&&(this.loader=i.loader,document.body.appendChild(i.clipper),this.editedUID=e.data.id,this.setPlaceholder(),this.open());break;case"feaasMeasurements":this.measurements=e.data.measurements,this.props.hidden||this.setPlaceholder();break}},this.onContentChange=()=>{this.setAttribute("changed","changed"),requestAnimationFrame(()=>{this.setIframeComponentContent()})},this.onClose=()=>{var e;this.setAttribute("hidden","hidden"),this.placeholder&&(this.placeholder.positionable.style.opacity="0",this.placeholder.positionable.style.pointerEvents="none"),this.chrome&&(this.chrome.wrapper.style.opacity="0"),!((e=this.target)===null||e===void 0)&&e.parentNode&&(this.target.outerHTML=this.target.outerHTML),this.setTarget(null,{component:null,version:null,instance:null,revision:null}),this.setEditorContext({isFocused:!1})},this.onVersionStateChange=(e,r)=>{this.versionContext=e,this.setVersionContext=r},this.onEditorStateChange=(e,r)=>{this.editorContext=e,this.setEditorContext=r,e.editor&&this.props.state=="loading"&&!this.props.hidden&&(this.setAttribute("state","ready"),this.ownerDocument.fonts.ready.then(()=>setTimeout(()=>{this.setReadyState(),this.setIframeComponentContent()},100)))}}getProps(){return Te(this)}getReactRootElement(){return this.reactRootElement||(this.reactRootElement=document.createElement("div"),this.getRoot().appendChild(this.reactRootElement)),this.reactRootElement}showLoader(){this.loader||(this.loader=document.createElement("feaas-loader"),this.loader.setAttribute("opacity","0.6"),this.loader.style.zIndex="1000",this.target.appendChild(this.loader),this.target.tagName=="FEAAS-COMPONENT"&&(this.target.style.position="relative"))}hideLoader(){this.loader&&(this.loader.setAttribute("hidden","hidden"),this.target.tagName=="FEAAS-COMPONENT"&&(this.target.style.position="relative",this.target.style.position=""))}load(){return import( /*@vite-ignore*/ /* webpackIgnore: true */ this.formatURL(this.props.src,this.props.frontend))}connectedCallback(){super.connectedCallback(),window.addEventListener("message",this.onWindowMessage)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("message",this.onWindowMessage)}setIframe(e){this.iframe=e}setIframeComponentContent(){this.placeholder&&this.iframe&&this.placeholder.editable.innerHTML&&this.iframe.contentWindow.postMessage({type:"feaasUpdate",id:this.editedUID,content:this.placeholder.editable.innerHTML})}setPlaceholder(){if(!this.iframe)return;let e=this.iframe.clientWidth,r=this.iframe.clientHeight,i=this.iframe.getBoundingClientRect(),n=this.getPlaceholder(),s=document.body.getBoundingClientRect(),o=this.measurements[this.editedUID];o&&(Object.assign(n.clipper.style,{position:"absolute",top:i.top+this.iframe.clientTop-s.top+"px",left:i.left+this.iframe.clientLeft-s.left+"px",width:e+"px",height:r+"px",pointerEvents:"none",zIndex:1,overflow:"hidden"}),Object.assign(n.positionable.style,{position:"absolute",top:o.top+"px",left:o.left+"px",width:o.width+"px",zIndex:2,transition:"opacity 0.4s",pointerEvents:this.props.hidden?"none":"all"}),Object.assign(n.loader.style,{position:"absolute",top:o.top+"px",left:o.left+"px",width:o.width+"px",height:o.height+"px",filter:"opacity(0.6)",zIndex:3,pointerEvents:"none"}),document.dispatchEvent(new Event("feaasRefresh",{bubbles:!0})))}getPlaceholder(){return this.placeholder?this.placeholder:(this.placeholder={clipper:document.createElement("div"),positionable:document.createElement("div"),editable:Object.assign(document.createElement("div"),{className:"-feaas"}),loader:document.createElement("feaas-loader")},this.placeholder.clipper.appendChild(this.placeholder.positionable),this.placeholder.positionable.appendChild(this.placeholder.editable),this.placeholder.clipper.appendChild(this.placeholder.loader),this.placeholder)}attributeChangedCallback(e,r,i){r!==i&&(e=="hidden"&&(this.style.setProperty("display","block","important"),this.style.setProperty("transition","opacity 0.3s","important"),i?(this.style.setProperty("opacity","0","important"),this.style.pointerEvents="none"):(this.style.setProperty("opacity","1","important"),this.style.pointerEvents="all")),super.attributeChangedCallback(e,r,i))}open(){clearTimeout(this.closing),this.removeAttribute("hidden"),this.removeAttribute("changed"),this.setLoadingState()}shouldFork(e){return e.forkOriginId==null&&this.props.instance!=null}cleanup(){var e;this.placeholder&&((e=this.placeholder.clipper)===null||e===void 0||e.remove(),this.placeholder=null)}close(){console.log("Editor is not ready")}unfork(){console.log("Editor is not ready")}discard(){console.log("Editor is not ready")}save(){console.log("Editor is not ready")}setVersionContext(e){console.log("Editor is not ready")}setEditorContext(e){console.log("Editor is not ready")}setLoadingState(){this.showLoader(),this.setAttribute("state","loading")}setReadyState(){this.hideLoader(),this.setEditorContext({activeVersionId:this.component.versions[0].id}),this.setAttribute("state","ready")}render({children:e,component:r,version:i,instance:n},{Editor:s,VersionStatusList:o,VersionStatusButton:a,Version:l,VersionMenu:u,EditorUIUndo:d,EditorUIMode:h,React:{useEffect:c,useMemo:p,useState:E,useContext:v},Chakra:{HStack:x,Box:A,Button:G,MenuItem:N},Chrome:Y,ReactDOM:kt,useSDK:k,useLibrary:M,useSlots:P,useModelObserver:lt,ConfirmationContext:B,VersionContext:g}){if(!this.payload)return;let{React:m}=this.payload,Dt=k(),Nt=M(),[y,Pt]=E(),{setConfirm:dt}=v(B),I=n||i;y&&(this.component=y),c(()=>{if(this.props.hidden)return;let S=Nt.components.getItem(r).clone();return S.versions.search({ids:[i,n].filter(Boolean),componentIds:[r]}).then(ut=>{S.versions.setItems(ut);let C=S.findVersion(n,["staged","published"]),j=S.findVersion(i,["staged","published"]);if(C)C.deletedAt?(C.getDraft().changeAndNotify(j.toProperties()).restore(),console.error("FEAAS Editor: Restoring fork")):(console.error("FEAAS Editor: Pre-forked"),this.setAttribute("forked",C.id));else if(this.removeAttribute("forked"),this.shouldFork(j)){console.error("FEAAS Editor: Forking");let ct=j.fork(n).id;this.setAttribute("instance",ct)}else console.error("FEAAS Editor: Regular");Pt(S)}),()=>{this.closing=setTimeout(()=>{this.closing=null,this.cleanup(),Pt(null)},400)}},[i,this.props.hidden]);let Tt=lt(y==null?void 0:y.versions,[]).filter(S=>S.id==I),U=Tt[0];U&&!this.props.hidden&&(this.version=U),c(()=>(this.unfork=()=>{dt({title:"Reverting component customizations",button:"Discard",body:"Are you sure to reset component to its original state? All changes will be lost.",action:()=>{let S=y.findVersion(i,["staged","published"]);y.findVersion(n).unstage().unpublish().changeAndNotify(S.toProperties()),y.saveVersions(!1),this.setVersionContext({needsWrite:!0}),this.removeAttribute("forked"),requestAnimationFrame(this.onClose)}})},this.discard=()=>{this.props.changed&&(y.findVersion(I).revert(),y.saveVersions(!1),this.setVersionContext({needsWrite:!0}))},this.close=()=>{dt({title:"Component has unsaved changes",button:"Discard",body:"Are you sure to close editor and discard changes?",bypass:!this.props.changed,action:()=>{this.discard(),requestAnimationFrame(this.onClose)}})},this.save=()=>{dt({bypass:!!this.props.forked,title:"Customizing component",button:"Save",body:"Changes to the component will only be visible on that page. Changes to component done in Component Builder will not be reflected here. It will be possible to revert the customization.",action:()=>{y.findVersion(I).commitData({view:this.editorContext.editor.getData({rootName:I}),model:""}).stage().publish(),this.removeAttribute("changed"),this.setAttribute("forked",I),y.saveVersions(!1)}})},()=>{delete this.unfork,delete this.discard,delete this.save,delete this.editorContext,delete this.versionContext,delete this.setEditorContext,delete this.setVersionContext}),[y]);let Xt=p(()=>this.target,[y]);return p(()=>y&&P(e,({picker:S,children:ut})=>m.createElement(A,{ref:C=>{this.chrome=C?{positionable:C,wrapper:C.querySelector(".editor-chrome"),absolute:this.querySelector(".ui.overlays")}:null}},m.createElement(A,{className:"editor-wrapper",position:"absolute",left:0,top:0},m.createElement(s,{datasources:Dt.datasources,sdk:Dt,library:Nt,component:y,versions:Tt,context:{isAutosaveEnabled:!1,onChromeMeasure:this.onMeasure,onChromeBeforeMeasure:this.onBeforeMeasure,onChromeMeasureElement:this.onChromeMeasureElement,onChromePosition:this.onPosition,onContentChange:this.onContentChange}},{exports:this.onEditorStateChange,after:ut,chrome:({editor:C})=>C&&m.createElement(Y,null),children:({isArchivedDisplayed:C,editor:j,status:ct})=>m.createElement(A,{position:"absolute",left:0,top:0,className:"editor-chrome",p:4,boxShadow:"2xl",pointerEvents:"none",opacity:0,transition:"opacity 0.3s"},m.createElement(A,{left:0,width:"4",top:0,bottom:0,backdropFilter:"blur(2px)",background:"rgb(244 244 244 / 80%)",position:"absolute"}),m.createElement(A,{right:0,width:"4",top:0,bottom:0,backdropFilter:"blur(2px)",background:"rgb(244 244 244 / 80%)",position:"absolute"}),m.createElement(A,{top:0,height:"16",left:0,right:0,backdropFilter:"blur(2px)",background:"rgb(244 244 244 / 80%)",position:"absolute"}),m.createElement(A,{bottom:0,height:"4",left:0,right:0,backdropFilter:"blur(2px)",background:"rgb(244 244 244 / 80%)",position:"absolute"}),U&&m.createElement(l,{version:U,node:Xt,ignoreBreakpoints:!0,deps:[this.props.forked,this.props.changed]},{exports:this.onVersionStateChange,left:m.createElement(x,{justifyContent:"space-between"},m.createElement(d,{size:"sm",editor:ct=="ready"?j:null}),m.createElement(h,{size:"sm"})),middle:(Le,$e)=>[!1],right:m.createElement(m.Fragment,null,m.createElement(G,{variant:"secondary",size:"sm",onClick:this.close},"Close"),m.createElement(G,{variant:"primary",size:"sm",onClick:this.save,isDisabled:!this.props.changed},this.props.changed?this.props.forked?"Save":"Save customization":"Up to date"),m.createElement(u,{isDisabled:!this.props.forked&&!this.props.changed},m.createElement(N,{onClick:this.unfork,isDisabled:!this.props.forked},"Unfork"),m.createElement(N,{onClick:this.discard,isDisabled:!this.props.changed},"Discard")))}))})))),[U,this.props.forked,this.props.changed])}isReadyToLoad(){return this.props.component!=null&&this.props.version!=null&&!this.props.hidden}};ot.observedAttributes=["library","component","version","revision","hidden","state","changed","forked"];ot.register("feaas-editor");function Oe(t){var e,r;return{part:(t==null?void 0:t.getAttribute("part"))||"picker",slot:(t==null?void 0:t.getAttribute("part"))||"picker",mode:t==null?void 0:t.getAttribute("mode"),placeholder:(t==null?void 0:t.getAttribute("placeholder"))||"No theme",frontend:(e=t==null?void 0:t.getContextAttribute("frontend"))!==null&&e!==void 0?e:"https://components.sitecorecloud.io",src:(r=t==null?void 0:t.getAttribute("src"))!==null&&r!==void 0?r:"/picker.js",hidden:(t==null?void 0:t.getAttribute("hidden"))!=null,variant:t==null?void 0:t.getAttribute("variant"),context:void 0,onClose:void 0,onContextAttributeSet:void 0}}var st=class extends b{constructor(){super(...arguments),this.defaultProps={hidden:!1}}getProps(){return Oe(this)}load(){return this.import( /*@vite-ignore*/ /* webpackIgnore: true */ this.formatURL(this.props.src,this.props.frontend))}render({placeholder:e,context:r,mode:i,children:n,variant:s},{Picker:o,React:a,useLibrary:l}){let u=l("collections"),d=l("stylesheet.styles");return a.createElement(o,{rules:d,collections:u,themeContext:r,placeholder:e,mode:i||void 0,onModeChange:h=>{h||this.props.onClose(h)},onContextAttributeSet:this.props.onContextAttributeSet,context:r,variant:s},n)}};st.observedAttributes=["library","mode","frontend","src","hidden","variant"];st.register("feaas-picker");function Me(t){var e,r,i,n;return{library:t==null?void 0:t.getAttribute("library"),src:(e=t==null?void 0:t.getAttribute("src"))!==null&&e!==void 0?e:"/context.js",frontend:(r=t==null?void 0:t.getAttribute("frontend"))!==null&&r!==void 0?r:"https://components.sitecoreclud.io",backend:(i=t==null?void 0:t.getAttribute("backend"))!==null&&i!==void 0?i:"https://components.sitecoreclud.io/api",cdn:(n=t==null?void 0:t.getAttribute("cdn"))!==null&&n!==void 0?n:"https://feaas.blob.core.windows.net",auth:null,isolate:(t==null?void 0:t.getAttribute("isolate"))==null||(t==null?void 0:t.getAttribute("isolate"))=="true"}}var at=class extends b{constructor(){super(...arguments),this.defaultProps={isolate:!0},this.onStatusChange=(e,r)=>{e=="ready"&&(this.whenSDKReady.resolve(r),this.dispatchEvent(new CustomEvent("feaasReady",{bubbles:!0,composed:!0,detail:r})))},this.whenSDKReady=R(e=>{this.sdk=e})}getProps(){return Me(this)}load(){return this.import( /*@vite-ignore*/ /* webpackIgnore: true */ this.formatURL(this.props.src,this.props.frontend))}isReadyToLoad(){return console.log("Is ready?",this.props,super.isReadyToLoad()&&this.props.library!=null),super.isReadyToLoad()&&this.props.library!=null}getTheme(e){return e}getRoot(){return this.getAttribute("isolate")==="false"?this:this.shadowRoot||this.attachShadow({mode:"open"})}getReactRootElement(){return this.reactRootElement||(this.reactRootElement=document.createElement("div"),this.getRoot().appendChild(this.reactRootElement)),this.reactRootElement}connectedCallback(){Array.from(this.children).forEach(e=>{this.getRoot().appendChild(e)}),super.connectedCallback()}render({children:e,library:r},{AppContext:i,Chakra:{Button:n,Tooltip:s},React:o}){let a={containerRef:{current:this.getRoot()}};return s.defaultProps={hasArrow:!0,placement:"top",portalProps:a},o.createElement(i,{backend:this.props.backend,libraryId:this.props.library,container:this.getRoot(),auth:this.props.auth,getTheme:this.getTheme,onStatusChange:this.onStatusChange,modalProps:{portalProps:a},chakraProps:{cssVarsRoot:":host",resetCSS:!0,toastOptions:{portalProps:a}}},e)}};at.observedAttributes=["library","component","version","revision","hostname","template"];at.register("feaas-context");export{b as Base,it as Component,_e as ComponentProps,D as DEFAULT_CDN_URL,b as FEAASBase,it as FEAASComponent,_e as FEAASComponentsProps,at as FEAASContext,Me as FEAASContextProps,ot as FEAASEditor,Te as FEAASEditorProps,nt as FEAASLoader,Fe as FEAASLoaderProps,st as FEAASPicker,Oe as FEAASPickerProps,St as FEAASStylesheet,ke as FEAASStylesheetProps,At as InvalidResponse,f as JSONPath,nt as Loader,ht as MyComponent,St as Stylesheet,_t as Thumbnail,be as autoloadScripts,Ae as cleanCollectionBit,dr as clearFetchCache,Se as createStylesheet,X as fetchAndRevalidate,K as fetchAndRevalidateComponent,xt as fetchAndRevalidateStylesheet,wt as fetchBypassingCache,Z as fetchCache,fr as fetchComponent,tt as fetchToValidateCache,$ as fetchWithCacheAwareness,Ce as findStylesheet,hr as getComponentSource,zt as getComponentURL,Ee as getFetchCache,Pe as getFramePosition,tr as getQualifier,pr as getStylesheetSource,rt as getStylesheetURL,Q as loadScript,Ct as loadStylesheet,Jt as loadStylesheetAllowStale,Ut as normalizeCollectionScope,ye as observeDOMElement,et as parseComponentSource,Ze as parseLimit,Xe as parseRange,Et as parseStylesheetSource,gt as queryScopes,qt as renderComponent,wr as renderComponentElement,Re as renderComponentPromise,q as renderDOMContent,F as renderDOMElement,sr as renderHTMLContent,gr as renderStylesheet,xe as renderStylesheetPromise,z as serializeCH1RichText,J as setDOMAttribute};
//# sourceMappingURL=index.esm.js.map